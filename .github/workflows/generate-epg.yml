name: Generate EPG

on:
  schedule:
      - cron: '0 3 * * *'  # TÃ¤glich um 03:00 Uhr UTC
        workflow_dispatch:

        jobs:
          build:
              runs-on: ubuntu-latest
                  steps:
                        - name: Checkout Repo
                                uses: actions/checkout@v3

                                      - name: Install Mono & WebGrab++
                                              run: |
                                                        sudo apt-get update
                                                                  sudo apt-get install -y mono-complete wget
                                                                            wget https://webgrabplus.com/sites/default/files/download/SW/V3.2/WebGrabPlus_V3.2_install.tar.gz
                                                                                      tar -xzf WebGrabPlus_V3.2_install.tar.gz
                                                                                                mkdir -p ~/webgrab
                                                                                                          mv WebGrabPlus/* ~/webgrab/

                                                                                                                - name: Copy Config & SiteIni
                                                                                                                        run: |
                                                                                                                                  cp config/WebGrab++.config.xml ~/webgrab/
                                                                                                                                            cp siteini/*.ini ~/webgrab/

                                                                                                                                                  - name: Run WebGrab++
                                                                                                                                                          run: mono ~/webgrab/WebGrab+Plus.exe

                                                                                                                                                                - name: Upload guide.xml
                                                                                                                                                                        uses: actions/upload-artifact@v3
                                                                                                                                                                                with:
                                                                                                                                                                                          name: epg
                                                                                                                                                                                                    path: ~/webgrab/guide.xml
                                                                                                                                                                                                    